<table class="table table-hover">
  <thead>
    <tr>
      <th><abbr title="Position" class="title">#</abbr></th>
      <th class="left-align">Team</th>
      <th><abbr title="Matches Played" class="title">MP</abbr></th>
      <th><abbr title="Wins" class="title">W</abbr></th>
      <th><abbr title="Losses" class="title">L</abbr></th>
      <th><abbr title="Draws" class="title">D</abbr></th>
      <th><abbr title="Goals For" class="title">GF</abbr></th>
      <th><abbr title="Goals Against" class="title">GA</abbr></th>
      <th><abbr title="Goal Difference" class="title">GD</abbr></th>
      <th>Points</th>
      <th>Form</th>
    </tr>
  </thead>
  <tbody class="<%= "compact" if specific_team.present? %>">
    <% ladder = get_ladder(age_group, division) %>
    <% this_team = -1 %>
    <% if specific_team.present? %>
      <% this_team = ladder.index(ladder.detect {|id, stats| id == specific_team }) %>
    <% end %>
    <% ladder.each_with_index do |t, i| %>
      <% if specific_team.blank? || (i.between?(this_team - 1, this_team + 1) && i.between?(0, ladder.size - 1)) %>
        <% team = Team.find t[0] %>
        <tr class="<%= team_classes team.id %>">
          <td><%= i + 1 %></td>
          <td class="left-align"><%= link_to(t[1][:name], team_path(t[0]), :class=> team_classes(t[0])) %></td>

          <td><%= t[1][:mp] %></td>
          <td><%= t[1][:w] %></td>
          <td><%= t[1][:l] %></td>
          <td><%= t[1][:d] %></td>
          <td><%= t[1][:gf] %></td>
          <td><%= t[1][:ga] %></td>
          <td><%= t[1][:gd] %></td>
          <td class="table-highlight"><%= t[1][:pts] %></td>
          <td ><%= render "/partials/team_form", :team => team %></td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
